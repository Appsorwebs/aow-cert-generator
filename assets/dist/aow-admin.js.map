{
  "version": 3,
  "sources": ["../js/aow-admin.js"],
  "sourcesContent": ["(function(){\n    // Helper: HTML escape\n    function escHtml(s){ if(s===null||s===undefined) return ''; return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\"/g,'&quot;'); }\n\n    // Modal admin implementation (simple)\n    function createAdminModalRoot(){\n        if(document.getElementById('aow-admin-modal-root')) return;\n        var root = document.createElement('div'); root.id = 'aow-admin-modal-root';\n        root.innerHTML = '\\n            <div id=\"aow-admin-modal-backdrop\" style=\"display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);z-index:9998\"></div>\\n            <div id=\"aow-admin-modal\" style=\"display:none;position:fixed;inset:0;z-index:9999;align-items:center;justify-content:center;padding:20px;\">\\n                <div id=\"aow-admin-modal-card\" style=\"max-width:900px;width:100%;background:#fff;color:#111;border-radius:8px;overflow:hidden;box-shadow:0 10px 40px rgba(2,6,23,0.6)\">\\n                    <div id=\"aow-admin-modal-header\" style=\"padding:12px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center;background:#f7fafc\"><strong id=\"aow-admin-modal-title\">Message</strong><button id=\"aow-admin-modal-close\" style=\"background:none;border:0;font-size:18px;cursor:pointer\">\u2715</button></div>\\n                    <div id=\"aow-admin-modal-body\" style=\"padding:16px;font-size:14px;max-height:60vh;overflow:auto\"></div>\\n                    <div id=\"aow-admin-modal-actions\" style=\"padding:12px;border-top:1px solid #eee;text-align:right;background:#f7fafc\"></div>\\n                </div>\\n            </div>\\n        ';\n        document.body.appendChild(root);\n        document.getElementById('aow-admin-modal-close').onclick = aow_admin_hideModal;\n    }\n\n    function aow_admin_showModal(title, htmlBody, actionsHtml){ createAdminModalRoot(); var bd=document.getElementById('aow-admin-modal-backdrop'); var m=document.getElementById('aow-admin-modal'); document.getElementById('aow-admin-modal-title').textContent = title||'Message'; document.getElementById('aow-admin-modal-body').innerHTML = htmlBody||''; document.getElementById('aow-admin-modal-actions').innerHTML = actionsHtml||'<button id=\"aow-admin-modal-ok\" class=\"button button-primary\">OK</button>'; bd.style.display='block'; m.style.display='flex'; var ok=document.getElementById('aow-admin-modal-ok'); if(ok) ok.focus(); }\n    function aow_admin_hideModal(){ var bd=document.getElementById('aow-admin-modal-backdrop'); var m=document.getElementById('aow-admin-modal'); if(bd) bd.style.display='none'; if(m) m.style.display='none'; }\n    function aow_admin_confirm(message, cbYes, cbNo){ aow_admin_showModal('Confirm', '<div style=\"margin-bottom:8px\">'+escHtml(message)+'</div>', '<button id=\"aow-admin-modal-yes\" class=\"button button-primary\">Yes</button><button id=\"aow-admin-modal-no\" class=\"button\" style=\"margin-left:8px\">No</button>'); document.getElementById('aow-admin-modal-yes').onclick=function(){ aow_admin_hideModal(); if(typeof cbYes==='function') cbYes(); }; document.getElementById('aow-admin-modal-no').onclick=function(){ aow_admin_hideModal(); if(typeof cbNo==='function') cbNo(); }; }\n    function aow_admin_prompt(message, defaultValue, cb){ aow_admin_showModal('Input Required', '<label style=\"display:block;margin-bottom:8px\">'+escHtml(message)+'</label><input id=\"aow-admin-modal-input\" style=\"width:100%;padding:8px;border:1px solid #ddd;border-radius:4px\" value=\"'+escHtml(defaultValue||'')+'\"/>', '<button id=\"aow-admin-modal-submit\" class=\"button button-primary\">OK</button><button id=\"aow-admin-modal-cancel\" class=\"button\" style=\"margin-left:8px\">Cancel</button>'); document.getElementById('aow-admin-modal-submit').onclick=function(){ var v=document.getElementById('aow-admin-modal-input').value; aow_admin_hideModal(); if(typeof cb==='function') cb(v); }; document.getElementById('aow-admin-modal-cancel').onclick=function(){ aow_admin_hideModal(); if(typeof cb==='function') cb(null); }; }\n\n    // Expose helpers globally for other inline scripts to use\n    window.aow_showModal = function(t,b,a){ aow_admin_showModal(t,b,a); };\n    window.aow_hideModal = function(){ aow_admin_hideModal(); };\n    window.aow_confirm = function(m,y,n){ aow_admin_confirm(m,y,n); };\n    window.aow_prompt = function(m,d,cb){ aow_admin_prompt(m,d,cb); };\n    window.escHtml = escHtml;\n\n    // Utility: POST JSON wrapper using WP nonce localized later\n    function fetchJson(url, body){\n        var headers = {'Content-Type':'application/json'};\n        if(window.AOW_REST && window.AOW_REST.nonce) headers['X-WP-Nonce'] = window.AOW_REST.nonce;\n        return fetch(url,{method:'POST',headers:headers,body:JSON.stringify(body)}).then(function(r){ return r.json(); });\n    }\n\n    // Attach handlers for retry/purge/details buttons\n    function initJobButtons(){\n        document.querySelectorAll('.aow-retry-job').forEach(function(b){ b.addEventListener('click',function(){ var id=this.getAttribute('data-jobid'); if(!id) return; var btn=this; btn.disabled=true; btn.textContent='Retrying...'; fetchJson(window.AOW_REST.root + 'retry-job', {job_id:id}).then(function(resp){ aow_showModal('Retry Job', '<div>' + (resp.message || JSON.stringify(resp)) + '</div>', '<button id=\"aow-admin-modal-ok\" class=\"button button-primary\">OK</button>'); setTimeout(function(){ location.reload(); }, 1200); }).catch(function(e){ aow_showModal('Retry Failed', '<div>Retry failed: '+escHtml(e.message)+'</div>'); setTimeout(function(){ location.reload(); }, 1200); }); }); });\n\n        document.querySelectorAll('.aow-purge-job').forEach(function(b){ b.addEventListener('click', function(){ var id=this.getAttribute('data-jobid'); if(!id) return; var btn=this; aow_confirm('Purge this job?', function(){ btn.disabled=true; fetchJson(window.AOW_REST.root + 'purge-job', {job_id:id}).then(function(r){ aow_showModal('Purge Job', '<div>' + (r.message || JSON.stringify(r)) + '</div>', '<button id=\"aow-admin-modal-ok\" class=\"button button-primary\">OK</button>'); setTimeout(function(){ location.reload(); }, 1200); }).catch(function(e){ aow_showModal('Purge Failed', '<div>Purge failed: '+escHtml(e.message)+'</div>'); setTimeout(function(){ location.reload(); }, 1200); }); }, function(){ /* cancelled */ }); }); });\n\n        document.querySelectorAll('.aow-details-job').forEach(function(b){ b.addEventListener('click', function(){ var id=this.getAttribute('data-jobid'); if(!id) return; var row = this.closest('tr'); var resCell = row.querySelector('td:nth-child(7)'); var details = resCell ? resCell.innerHTML : 'No details'; aow_showModal('Job Details '+id, '<div style=\"max-height:60vh;overflow:auto\">'+details+'</div>', '<button id=\"aow-admin-modal-ok\" class=\"button button-primary\">Close</button>'); }); });\n    }\n\n    // Initialize when DOM ready\n    if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', initJobButtons); else initJobButtons();\n})();\n"],
  "mappings": "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",
  "names": ["escHtml", "s", "createAdminModalRoot", "root", "aow_admin_hideModal", "aow_admin_showModal", "title", "htmlBody", "actionsHtml", "bd", "m", "ok", "aow_admin_confirm", "message", "cbYes", "cbNo", "aow_admin_prompt", "defaultValue", "cb", "v", "t", "b", "a", "y", "d", "fetchJson", "url", "body", "headers", "r", "initJobButtons", "id", "btn", "resp", "row", "resCell", "details"]
}
