(()=>{(function(){function i(o){return o==null?"":String(o).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function c(){if(!document.getElementById("aow-admin-modal-root")){var o=document.createElement("div");o.id="aow-admin-modal-root",o.innerHTML=`
            <div id="aow-admin-modal-backdrop" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);z-index:9998"></div>
            <div id="aow-admin-modal" style="display:none;position:fixed;inset:0;z-index:9999;align-items:center;justify-content:center;padding:20px;">
                <div id="aow-admin-modal-card" style="max-width:900px;width:100%;background:#fff;color:#111;border-radius:8px;overflow:hidden;box-shadow:0 10px 40px rgba(2,6,23,0.6)">
                    <div id="aow-admin-modal-header" style="padding:12px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center;background:#f7fafc"><strong id="aow-admin-modal-title">Message</strong><button id="aow-admin-modal-close" style="background:none;border:0;font-size:18px;cursor:pointer">\u2715</button></div>
                    <div id="aow-admin-modal-body" style="padding:16px;font-size:14px;max-height:60vh;overflow:auto"></div>
                    <div id="aow-admin-modal-actions" style="padding:12px;border-top:1px solid #eee;text-align:right;background:#f7fafc"></div>
                </div>
            </div>
        `,document.body.appendChild(o),document.getElementById("aow-admin-modal-close").onclick=d}}function a(o,t,n){c();var e=document.getElementById("aow-admin-modal-backdrop"),l=document.getElementById("aow-admin-modal");document.getElementById("aow-admin-modal-title").textContent=o||"Message",document.getElementById("aow-admin-modal-body").innerHTML=t||"",document.getElementById("aow-admin-modal-actions").innerHTML=n||'<button id="aow-admin-modal-ok" class="button button-primary">OK</button>',e.style.display="block",l.style.display="flex";var u=document.getElementById("aow-admin-modal-ok");u&&u.focus()}function d(){var o=document.getElementById("aow-admin-modal-backdrop"),t=document.getElementById("aow-admin-modal");o&&(o.style.display="none"),t&&(t.style.display="none")}function s(o,t,n){a("Confirm",'<div style="margin-bottom:8px">'+i(o)+"</div>",'<button id="aow-admin-modal-yes" class="button button-primary">Yes</button><button id="aow-admin-modal-no" class="button" style="margin-left:8px">No</button>'),document.getElementById("aow-admin-modal-yes").onclick=function(){d(),typeof t=="function"&&t()},document.getElementById("aow-admin-modal-no").onclick=function(){d(),typeof n=="function"&&n()}}function f(o,t,n){a("Input Required",'<label style="display:block;margin-bottom:8px">'+i(o)+'</label><input id="aow-admin-modal-input" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px" value="'+i(t||"")+'"/>','<button id="aow-admin-modal-submit" class="button button-primary">OK</button><button id="aow-admin-modal-cancel" class="button" style="margin-left:8px">Cancel</button>'),document.getElementById("aow-admin-modal-submit").onclick=function(){var e=document.getElementById("aow-admin-modal-input").value;d(),typeof n=="function"&&n(e)},document.getElementById("aow-admin-modal-cancel").onclick=function(){d(),typeof n=="function"&&n(null)}}window.aow_showModal=function(o,t,n){a(o,t,n)},window.aow_hideModal=function(){d()},window.aow_confirm=function(o,t,n){s(o,t,n)},window.aow_prompt=function(o,t,n){f(o,t,n)},window.escHtml=i;function r(o,t){var n={"Content-Type":"application/json"};return window.AOW_REST&&window.AOW_REST.nonce&&(n["X-WP-Nonce"]=window.AOW_REST.nonce),fetch(o,{method:"POST",headers:n,body:JSON.stringify(t)}).then(function(e){return e.json()})}function m(){document.querySelectorAll(".aow-retry-job").forEach(function(o){o.addEventListener("click",function(){var t=this.getAttribute("data-jobid");if(t){var n=this;n.disabled=!0,n.textContent="Retrying...",r(window.AOW_REST.root+"retry-job",{job_id:t}).then(function(e){aow_showModal("Retry Job","<div>"+(e.message||JSON.stringify(e))+"</div>",'<button id="aow-admin-modal-ok" class="button button-primary">OK</button>'),setTimeout(function(){location.reload()},1200)}).catch(function(e){aow_showModal("Retry Failed","<div>Retry failed: "+i(e.message)+"</div>"),setTimeout(function(){location.reload()},1200)})}})}),document.querySelectorAll(".aow-purge-job").forEach(function(o){o.addEventListener("click",function(){var t=this.getAttribute("data-jobid");if(t){var n=this;aow_confirm("Purge this job?",function(){n.disabled=!0,r(window.AOW_REST.root+"purge-job",{job_id:t}).then(function(e){aow_showModal("Purge Job","<div>"+(e.message||JSON.stringify(e))+"</div>",'<button id="aow-admin-modal-ok" class="button button-primary">OK</button>'),setTimeout(function(){location.reload()},1200)}).catch(function(e){aow_showModal("Purge Failed","<div>Purge failed: "+i(e.message)+"</div>"),setTimeout(function(){location.reload()},1200)})},function(){})}})}),document.querySelectorAll(".aow-details-job").forEach(function(o){o.addEventListener("click",function(){var t=this.getAttribute("data-jobid");if(t){var n=this.closest("tr"),e=n.querySelector("td:nth-child(7)"),l=e?e.innerHTML:"No details";aow_showModal("Job Details "+t,'<div style="max-height:60vh;overflow:auto">'+l+"</div>",'<button id="aow-admin-modal-ok" class="button button-primary">Close</button>')}})})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",m):m()})();})();
//# sourceMappingURL=aow-admin.js.map
